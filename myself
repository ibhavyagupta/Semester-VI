this is my html and js below. in this code, the logic is when we click on calculate button, error comes up for the input field based on the error criteria. i want to have the error shown when user enters some digit and blur the input field or click outside of the input field..same error should shown up

  <div class="wr-container">
                                <div class="wr-form-section">
                                    <h1 class="wr-ryc-header">Rental yield calculator</h1>
                                    <p class="wr-ryc-paragraph">Work out how much money your rental property could
                                        bring
                                        in each year.
                                    </p>

                                    <div class="wr-input-group">
                                        <label for="wr-propertyValue" class="wr-label-text">Current value of
                                            property</label>
                                        <div class="wr-input-prefix">
                                            <span>£</span>
                                            <input type="text" id="wr-propertyValue" inputmode="numeric"
                                                pattern="[0-9]*" aria-describedby="wr-propertyError" autocomplete="off"
                                                placeholder="0" />
                                        </div>
                                        <small class="wr-error" id="wr-propertyError" aria-live="polite"></small>
                                    </div>

                                    <div class="wr-input-group">
                                        <label for="wr-monthlyRent" class="wr-label-text">Monthly rent</label>
                                        <div class="wr-input-prefix">
                                            <span>£</span>
                                            <input type="text" id="wr-monthlyRent" inputmode="numeric" pattern="[0-9]*"
                                                aria-describedby="wr-rentError" placeholder="0" />
                                        </div>
                                        <small class="wr-error" id="wr-rentError" aria-live="polite"></small>
                                    </div>

                                    <div class="wr-input-group">
                                        <label for="wr-monthlyMortgage" class="wr-label-text">Monthly mortgage payments
                                            (optional)</label>
                                        <div class="wr-input-prefix">
                                            <span>£</span>
                                            <input type="text" id="wr-monthlyMortgage" inputmode="numeric"
                                                pattern="[0-9]*" placeholder="0" />
                                        </div>
                                    </div>

                                    <div class="wr-input-group">
                                        <label for="wr-monthlyCosts" class="wr-label-text">
                                            Monthly costs (optional)
                                            <div role="button" type="button" class="wr-info-toggle"
                                                onclick="toggleInfo()" onkeydown="handleInfoKey(event)" tabindex="0"
                                                aria-expanded="false" aria-controls="wr-infoText">
                                                What does this include?
                                                <img id="wr-chevronIcon" src="/Chevron-down.svg" alt=""
                                                    class="wr-chevron-icon" />
                                            </div>
                                        </label>
                                        <div id="wr-infoText" class="wr-info-text" role="region" aria-hidden="true">
                                            This covers costs like building insurance, boiler insurance, property
                                            maintenance, agent
                                            management fees, etc.
                                        </div>
                                        <div class="wr-input-prefix">
                                            <span>£</span>
                                            <input type="text" id="wr-monthlyCosts" inputmode="numeric" pattern="[0-9]*"
                                                placeholder="0" />
                                        </div>
                                    </div>

                                    <div class="wr-ryc-cta-wrapper">
                                        <button onclick="calculateYield()" class="wr-ryc-cta-button">Calculate rental
                                            yield</button>
                                    </div>
                                </div>

                                <div class="wr-result-section">
                                    <div class="wr-result-container" aria-labelledby="wr-resultHeading">
                                        <div class="wr-result-top">
                                            <img src="/Mortgage calculator.png" alt="Result section illustration" />
                                            <h2 class="wr-result-header" id="wr-resultHeading">Rental yield breakdown
                                            </h2>
                                        </div>
                                        <div class="wr-result-box">
                                            <div class="wr-result-wrap">
                                                <p class="wr-result-title">Gross rental yield:</p>
                                                <p id="wr-grossYield" class="wr-result-value">0%</p>
                                            </div>
                                            <div class="wr-result-wrap">
                                                <p class="wr-result-title">Net rental yield:</p>
                                                <p id="wr-netYield" class="wr-result-value">0%</p>
                                            </div>
                                            <div class="wr-result-wrap">
                                                <p class="wr-result-title">Net annual return:</p>
                                                <p id="wr-netReturn" class="wr-result-value">£0</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="wr-notification-banner" role="note">
                                <div class="wr-notification-image">
                                    <img src="/Info.svg" alt="" role="presentation" />
                                </div>
                                <div class="wr-notification-text">
                                    These numbers are estimates based on the amounts you entered. We haven’t
                                    included
                                    any unforeseen
                                    costs
                                    in our calculations.
                                </div>
                            </div>

                            <!-- Accordion Section -->
                            <div class="wr-accordion" onclick="toggleAccordion(this)" role="button" tabindex="0"
                                aria-expanded="false" aria-controls="wr-accordion1-content">
                                <div class="wr-accordion-toggle">
                                    <div class="wr-icon-wrapper">
                                        <img src="/Plus.svg" alt="" role="presentation" class="wr-accordion-icon" />
                                    </div>
                                    <div class="wr-accordion-header">What does gross and net mean?</div>
                                </div>
                                <div class="wr-accordion-content" id="wr-accordion1-content" role="region"
                                    aria-hidden="true">
                                    <div>Gross rental yield measures your rental income against the price of the
                                        property before
                                        expenses.
                                    </div>
                                    <div>Net rental yield (and net annual return) is what you're left with after
                                        expenses.</div>
                                </div>
                            </div>

                            <div class="wr-accordion" onclick="toggleAccordion(this)" role="button" tabindex="0"
                                aria-expanded="false" aria-controls="wr-accordion2-content">
                                <div class="wr-accordion-toggle">
                                    <div class="wr-icon-wrapper">
                                        <img src="/Plus.svg" alt="" role="presentation" class="wr-accordion-icon" />
                                    </div>
                                    <div class="wr-accordion-header">How did you calculate my rental yield?</div>
                                </div>

                                <div class="wr-accordion-content" id="wr-accordion2-content" role="region"
                                    aria-hidden="true">
                                    <div class="wr-accordion-sub-header">For gross rental yield we:</div>
                                    <ol>
                                        <li>Multiplied your monthly rental income by 12 to find your annual income.
                                        </li>
                                        <li>Divided that figure by the property purchase price/current value.</li>
                                        <li>Then, multiplied the figure by 100. The final number is your gross
                                            rental
                                            yield as a
                                            percentage.
                                        </li>
                                    </ol>

                                    <div class="wr-accordion-sub-header">To calculate net rental yield we:</div>
                                    <ol>
                                        <li>Multiplied your monthly rental income by 12.</li>
                                        <li>Multiplied your monthly rental costs by 12, then subtracted that number
                                            from
                                            the annual
                                            rental
                                            income.</li>
                                        <li>Divided that by the property’s purchase value/current price.</li>
                                        <li>Multiplied that figure by 100 to get your net percentage.</li>
                                    </ol>
                                </div>
                            </div>

                            <script>
    document.querySelectorAll("input[type='text']").forEach((input) => {
        input.addEventListener("input", function () {
            let value = this.value.replace(/,/g, "");
            value = value.replace(/[^\d.]/g, "");
            const parts = value.split(".");
            if (parts.length > 2) value = parts[0] + "." + parts.slice(1).join("");
            let formattedValue = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            if (parts.length > 1) formattedValue += "." + parts[1];
            this.value = formattedValue;
        });

        input.addEventListener("keydown", function (e) {
            if ((e.key === "e" || e.key === "E" || e.key === "+" || e.key === "-") ||
                (e.key === "." && this.value.includes("."))) {
                e.preventDefault();
            }
        });
    });

    document.querySelectorAll('.wr-accordion').forEach(acc => {
        acc.addEventListener('keydown', function (e) {
            if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                toggleAccordion(this);
            }
        });
    });

    function toggleInfo() {
        const infoText = document.getElementById("wr-infoText");
        const toggle = document.querySelector(".wr-info-toggle");
        const expanded = toggle.getAttribute("aria-expanded") === "true";
        toggle.setAttribute("aria-expanded", !expanded);
        infoText.setAttribute("aria-hidden", expanded);
        infoText.classList.toggle("active");
        toggle.classList.toggle("active");
    }

    function toggleAccordion(el) {
        const expanded = el.getAttribute("aria-expanded") === "true";
        el.setAttribute("aria-expanded", !expanded);
        const content = el.querySelector(".wr-accordion-content");
        if (content) {
            content.setAttribute("aria-hidden", expanded);
        }
        el.classList.toggle("active");
    }

    function handleInfoKey(e) {
        if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            toggleInfo();
        }
    }

    function validateInputField(inputField, errorContainer, conditionFn, errorMessage) {
        errorContainer.innerHTML = "";
        inputField.classList.remove("error-border");

        const value = parseFloat(inputField.value.replace(/,/g, "")) || 0;

        if (conditionFn(value)) {
            const img = document.createElement("img");
            img.src = "/Error.svg";
            img.alt = "Error";
            img.className = "error-icon";

            const text = document.createTextNode(errorMessage);
            errorContainer.appendChild(img);
            errorContainer.appendChild(text);
            errorContainer.style.display = "flex";
            errorContainer.style.alignItems = "center";
            errorContainer.style.gap = "6px";

            inputField.classList.add("error-border");
            return false;
        }
        return true;
    }

    // Real-time validation on blur
    document.getElementById("wr-propertyValue").addEventListener("blur", function () {
        validateInputField(
            this,
            document.getElementById("wr-propertyError"),
            (value) => value < 25000,
            "Min. £25,000 required"
        );
    });

    document.getElementById("wr-monthlyRent").addEventListener("blur", function () {
        validateInputField(
            this,
            document.getElementById("wr-rentError"),
            (value) => value <= 0,
            "Monthly rent required."
        );
    });

    function calculateYield() {
        const propertyValueInput = document.getElementById("wr-propertyValue");
        const monthlyRentInput = document.getElementById("wr-monthlyRent");
        const mortgageInput = document.getElementById("wr-monthlyMortgage");
        const expensesInput = document.getElementById("wr-monthlyCosts");
        const propertyError = document.getElementById("wr-propertyError");
        const rentError = document.getElementById("wr-rentError");

        const propertyValue = parseFloat(propertyValueInput.value.replace(/,/g, '')) || 0;
        const monthlyRent = parseFloat(monthlyRentInput.value.replace(/,/g, '')) || 0;
        const monthlyMortgage = parseFloat(mortgageInput.value.replace(/,/g, '')) || 0;
        const monthlyExpenses = parseFloat(expensesInput.value.replace(/,/g, '')) || 0;

        const grossYieldEl = document.getElementById("wr-grossYield");
        const netYieldEl = document.getElementById("wr-netYield");
        const netReturnEl = document.getElementById("wr-netReturn");

        // Run validation
        const isPropertyValid = validateInputField(
            propertyValueInput,
            propertyError,
            (value) => value < 25000,
            "Min. £25,000 required"
        );

        const isRentValid = validateInputField(
            monthlyRentInput,
            rentError,
            (value) => value <= 0,
            "Monthly rent required."
        );

        const hasError = !(isPropertyValid && isRentValid);

        if (hasError) {
            if (!isPropertyValid) {
                propertyValueInput.focus();
            } else {
                monthlyRentInput.focus();
            }
            grossYieldEl.textContent = "0%";
            netYieldEl.textContent = "0%";
            netReturnEl.textContent = "£0.00";
            return;
        }

        const annualRent = monthlyRent * 12;
        const annualCosts = (monthlyMortgage + monthlyExpenses) * 12;
        const grossYield = (annualRent / propertyValue) * 100;
        const netYield = ((annualRent - annualCosts) / propertyValue) * 100;
        const netReturn = annualRent - annualCosts;

        grossYieldEl.textContent = `${grossYield.toFixed(1)}%`;
        netYieldEl.textContent = `${netYield.toFixed(1)}%`;
        netReturnEl.textContent = `${netReturn < 0 ? '-' : ''}£${Math.abs(netReturn).toFixed(2)}`;
    }
</script>

